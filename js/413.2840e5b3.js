"use strict";(self["webpackChunkp_1"]=self["webpackChunkp_1"]||[]).push([[413],{84413:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"infoManage"},[t("el-form",{staticClass:"demo-form-inline"},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.addInfo}},[e._v("新增")]),t("el-dialog",{attrs:{title:e.state?"新增信息":"修改信息",visible:e.dialogFormVisible,"before-close":e.closeDialog,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{prop:"id",label:"id","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),t("el-form-item",{attrs:{prop:"name",label:"姓名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{prop:"age",label:"年龄","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("el-form-item",{attrs:{prop:"sex",label:"性别","label-width":e.formLabelWidth}},[t("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),t("el-radio",{attrs:{label:"2"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1),t("el-form-item",{attrs:{prop:"father",label:"父亲","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.father,callback:function(t){e.$set(e.form,"father",t)},expression:"form.father"}})],1),t("el-form-item",{attrs:{prop:"mather",label:"母亲","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mather,callback:function(t){e.$set(e.form,"mather",t)},expression:"form.mather"}})],1),t("el-form-item",{attrs:{prop:"address",label:"家庭地址","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),t("el-form-item",{attrs:{prop:"time",label:"入校时间","label-width":e.formLabelWidth}},[t("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),t("el-form-item",{attrs:{prop:"phone",label:"手机号码","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.closeDialog("form")}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure("form")}}},[e._v("确 定")])],1)],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"id",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center"}}),t("el-table-column",{attrs:{prop:"sex_text",label:"性别",align:"center"}}),t("el-table-column",{attrs:{prop:"father",label:"父亲",align:"center"}}),t("el-table-column",{attrs:{prop:"mather",label:"母亲",align:"center"}}),t("el-table-column",{attrs:{prop:"time",label:"入校时间",align:"center"}}),t("el-table-column",{attrs:{prop:"address",label:"家庭地址",align:"center"}}),t("el-table-column",{attrs:{prop:"phone",label:"手机号码",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"operate-block"}),t("el-button",{staticStyle:{display:"inline-block"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.btn_edit(a.row)}}},[e._v("修改 ")]),t("el-button",{staticStyle:{display:"inline-block"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.btn_del(a.row)}}},[e._v("删除 ")])]}}])})],1)],1)},l=[],r=a(7877),i=a(93297),n={created(){(0,i.Yu)("/info",this)},data(){return{tableData:[],dialogFormVisible:!1,form:{name:"",sex:"1",age:"",father:"",mather:"",address:"",time:"",phone:""},formLabelWidth:"80px",rules:{name:[{required:!0,message:"输入姓名"}],age:[{required:!0,message:"输入年龄"}],sex:[{required:!0}],time:[{required:!0,message:"选择时间"}],phone:[{required:!0,message:"输入手机号"}]},state:!0}},methods:{getData(){(0,r.m)().then((e=>{200===e.data.status&&(console.log(e),this.tableData=[...e.data.data],this.total=e.data.total,this.tableData.forEach((e=>{"1"===e.sex?e.sex_text="男":e.sex_text="女"})))}))},addInfo(){console.log(" this.form",this.form),this.state=!0,this.form={name:"",sex:"1",age:"",father:"",mather:"",address:"",time:"",phone:""},this.dialogFormVisible=!0},btn_edit(e){console.log("this.form",this.form),this.state=!1,this.dialogFormVisible=!0,this.$nextTick((()=>{this.form={...e}}))},btn_del(e){console.log("scope.row.id:",e.id),(0,i.YA)("/info",this,e,i.Yu)},sure(e){this.$refs[e].validate((e=>{if(e){let e=null;e=this.state?"post":"put",(0,i.Oe)(e,"/info",this,this.form,i.Yu)}}))},closeDialog(e){this.$refs["form"].resetFields(),this.dialogFormVisible=!1}},watch:{}},s=n,m=a(1001),f=(0,m.Z)(s,o,l,!1,null,"2a071fe1",null),c=f.exports},7877:function(e,t,a){a.d(t,{Ab:function(){return f},eM:function(){return u},iq:function(){return c},m:function(){return m},nJ:function(){return s},qH:function(){return n},x4:function(){return i}});var o=a(92617),l=a(95410),r=a.n(l);function i(e){return console.log("login接口正在请求"),(0,o.Z)({method:"post",url:"/login",data:e})}function n(e){return(0,o.Z)({method:"get",url:"/students",params:e})}function s(e){return(0,o.Z)({method:"delete",url:`/students/${e}`})}function m(e){return(0,o.Z)({method:"get",url:"/info",params:e})}function f(e){return console.log("apidata",e),e=r().stringify(e),console.log("qs_apidata",e),(0,o.Z)({method:"post",url:"/info",data:e})}function c(e){return e=r().stringify(e),(0,o.Z)({method:"put",url:"/info",data:e})}function u(e){return(0,o.Z)({method:"delete",url:`/info/${e}`})}},93297:function(e,t,a){a.d(t,{Oe:function(){return i},WJ:function(){return s},YA:function(){return n},Yu:function(){return r}});var o=a(95410),l=a.n(o);function r(e,t,a){t.service.get(e,{params:a||{}}).then((e=>{200===e.data.status&&(t.tableData=[...e.data.data],t.total=e.data.total,t.tableData.forEach((e=>{"1"===e.sex?e.sex_text="男":e.sex_text="女"})))})).catch((e=>{throw e}))}function i(e,t,a,o,r){let i=l().stringify(o);a.service[e](t,i).then((e=>{200===e.data.status&&(r(t,a),a.dialogFormVisible=!1,a.$refs["form"].resetFields(),a.$message({type:"success",message:e.data.message}))})).catch((e=>{throw e}))}function n(e,t,a,o){t.$confirm(`确定要删除ID为 ${a.id} 的 ${a.name} 的信息吗`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,type:"warning"}).then((()=>{console.log(a.id),console.log(e+"/"+a.id),t.service.delete(e+"/"+a.id).then((a=>{200===a.data.status&&(t.$message({message:a.data.message,type:"success"}),o(e,t))}))})).catch((e=>{throw t.$message({message:"取消删除",type:"info"}),e}))}function s(e,t,a,o){t.service.get(e,{params:a||{}}).then((e=>{200===e.data.status&&(t.tableData=[...e.data.data],t.total=e.data.total,t.tableData.map((e=>{o.map((t=>{e[t]?e[t+"_text"]="已完成":e[t+"_text"]="未完成"}))})),t.loading=!1)})).catch((e=>{throw e}))}}}]);
//# sourceMappingURL=413.2840e5b3.js.map