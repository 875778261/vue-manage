"use strict";(self["webpackChunkp_1"]=self["webpackChunkp_1"]||[]).push([[923],{3923:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"infoList"},[t("el-form",{staticClass:"demo-form-inline"},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.addInfo}},[e._v("新增")]),t("el-dialog",{attrs:{title:e.state?"新增信息":"修改信息",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{prop:"name",label:"姓名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{prop:"age",label:"年龄","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("el-form-item",{attrs:{prop:"sex",label:"性别","label-width":e.formLabelWidth}},[t("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),t("el-radio",{attrs:{label:"2"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1),t("el-form-item",{attrs:{prop:"father",label:"父亲","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.father,callback:function(t){e.$set(e.form,"father",t)},expression:"form.father"}})],1),t("el-form-item",{attrs:{prop:"mather",label:"母亲","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mather,callback:function(t){e.$set(e.form,"mather",t)},expression:"form.mather"}})],1),t("el-form-item",{attrs:{prop:"address",label:"家庭地址","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),t("el-form-item",{attrs:{prop:"time",label:"入校时间","label-width":e.formLabelWidth}},[t("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),t("el-form-item",{attrs:{prop:"phone",label:"手机号码","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.closeDialog("form")}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure("form")}}},[e._v("确 定")])],1)],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"id",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center"}}),t("el-table-column",{attrs:{prop:"sex_text",label:"性别",align:"center"}}),t("el-table-column",{attrs:{prop:"father",label:"父亲",align:"center"}}),t("el-table-column",{attrs:{prop:"mather",label:"母亲",align:"center"}}),t("el-table-column",{attrs:{prop:"time",label:"入校时间",align:"center"}}),t("el-table-column",{attrs:{prop:"address",label:"家庭地址",align:"center"}}),t("el-table-column",{attrs:{prop:"phone",label:"手机号码",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.btn_edit(a.row)}}},[e._v("修改 ")]),t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.btn_del(a.row)}}},[e._v("删除 ")])]}}])})],1)],1)},l=[],r=a(7877),s={created(){console.log(this.tableData),this.getData()},data(){return{tableData:[],dialogFormVisible:!1,form:{name:"",sex:"1",age:"",father:"",mather:"",address:"",time:"",phone:""},formLabelWidth:"80px",rules:{name:[{required:!0,message:"输入姓名"}],age:[{required:!0,message:"输入年龄"}],sex:[{required:!0}],time:[{required:!0,message:"选择时间"}],phone:[{required:!0,message:"输入手机号"}]},state:!0}},methods:{getData(){(0,r.m)().then((e=>{200===e.data.status&&(this.tableData=[...e.data.data],this.total=e.data.total,this.tableData.forEach((e=>{"1"===e.sex?e.sex_text="男":e.sex_text="女"})))}))},addInfo(){console.log(" this.form",this.form),this.state=!0,this.form={name:"",sex:"1",age:"",father:"",mather:"",address:"",time:"",phone:""},this.dialogFormVisible=!0},btn_edit(e){console.log(" this.form",this.form),this.state=!1,this.dialogFormVisible=!0,this.$nextTick((()=>{this.form={...e}}))},btn_del(e){console.log("scope.row.id:",e.id),this.$confirm(`确定要删除ID为 ${e.id} 的 ${e.name} 的信息吗`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,type:"warning"}).then((()=>{(0,r.eM)(e.id).then((e=>{console.log(e),200===e.data.status&&(this.$message({message:e.data.message,type:"success"}),this.getData())}))})).catch((()=>{this.$message({message:"取消删除",type:"info"})}))},sure(e){this.$refs[e].validate((e=>{e&&(this.state?(0,r.Ab)(this.form).then((e=>{200===e.data.status&&(this.$message({type:"success",message:e.data.message}),this.dialogFormVisible=!1)})):(0,r.iq)(this.form).then((e=>{200===e.data.status&&(this.dialogFormVisible=!1,this.$message({type:"success",message:e.data.message}))})))})),this.$refs[e].resetFields(),this.getData()},closeDialog(e){this.$refs[e].resetFields(),this.dialogFormVisible=!1}}},i=s,n=a(1001),m=(0,n.Z)(i,o,l,!1,null,"69377ff5",null),f=m.exports},7877:function(e,t,a){a.d(t,{Ab:function(){return f},eM:function(){return c},iq:function(){return u},m:function(){return m},nJ:function(){return n},qH:function(){return i},x4:function(){return s}});var o=a(92617),l=a(95410),r=a.n(l);function s(e){return console.log("login接口正在请求"),(0,o.Z)({method:"post",url:"/login",data:e})}function i(e){return(0,o.Z)({method:"get",url:"/students",params:e})}function n(e){return(0,o.Z)({method:"delete",url:`/students/${e}`})}function m(e){return(0,o.Z)({method:"get",url:"/info",params:e})}function f(e){return console.log("apidata",e),e=r().stringify(e),console.log("qs_apidata",e),(0,o.Z)({method:"post",url:"/info",data:e})}function u(e){return e=r().stringify(e),(0,o.Z)({method:"put",url:"/info",data:e})}function c(e){return(0,o.Z)({method:"delete",url:`/info/${e}`})}}}]);
//# sourceMappingURL=923.3efa0127.js.map