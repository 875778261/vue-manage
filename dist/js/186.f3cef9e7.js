"use strict";(self["webpackChunkp_1"]=self["webpackChunkp_1"]||[]).push([[186],{41186:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"work-manage"},[t("h1",[e._v("work管理")]),t("Pagination",{attrs:{total:e.total,url:e.url}}),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"用户ID",align:"center"}}),t("el-table-column",{attrs:{prop:"userId",label:"所属班级",align:"center"}}),t("el-table-column",{attrs:{prop:"title",label:"作业名称",align:"center"}}),t("el-table-column",{attrs:{prop:"completed_text",label:"完成情况",align:"center"}})],1)],1)},r=[],l=a(93297),s=function(){var e=this,t=e._self._c;return t("div",[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total,url:e.url},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],i={props:{total:Number,url:String},created(){(0,l.WJ)("/works",this.$parent,{page:1,size:10},["completed"])},data(){return{currentPage:1,pageSizes:[10,20,30,40],pageSize:10}},computed:{getPageData(){let e;return e=this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize),e}},methods:{handleSizeChange(e){const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.pageSize=e,this.currentPage=1,(0,l.WJ)("/works",this.$parent,{page:this.currentPage,size:e},["completed"]),console.log(`每页 ${e} 条`),console.log(`当前页: ${this.currentPage}`),t.close()},handleCurrentChange(e){const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});(0,l.WJ)("/works",this.$parent,{page:e,size:this.pageSize},["completed"]),console.log(`当前页: ${e}`),this.currentPage=e,t.close()}}},c=i,u=a(1001),g=(0,u.Z)(c,s,o,!1,null,null,null),d=g.exports,p={created(){},components:{Pagination:d},data(){return{tableData:[],total:null,loading:!0,url:"/works"}}},h=p,m=(0,u.Z)(h,n,r,!1,null,null,null),b=m.exports},93297:function(e,t,a){a.d(t,{Oe:function(){return s},WJ:function(){return i},YA:function(){return o},Yu:function(){return l}});var n=a(95410),r=a.n(n);function l(e,t,a){t.service.get(e,{params:a||{}}).then((e=>{200===e.data.status&&(t.tableData=[...e.data.data],t.total=e.data.total,t.tableData.forEach((e=>{"1"===e.sex?e.sex_text="男":e.sex_text="女"})))})).catch((e=>{throw e}))}function s(e,t,a,n,l){let s=r().stringify(n);a.service[e](t,s).then((e=>{200===e.data.status&&(l(t,a),a.dialogFormVisible=!1,a.$refs["form"].resetFields(),a.$message({type:"success",message:e.data.message}))})).catch((e=>{throw e}))}function o(e,t,a,n){t.$confirm(`确定要删除ID为 ${a.id} 的 ${a.name} 的信息吗`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,type:"warning"}).then((()=>{console.log(a.id),console.log(e+"/"+a.id),t.service.delete(e+"/"+a.id).then((a=>{200===a.data.status&&(t.$message({message:a.data.message,type:"success"}),n(e,t))}))})).catch((e=>{throw t.$message({message:"取消删除",type:"info"}),e}))}function i(e,t,a,n){t.service.get(e,{params:a||{}}).then((e=>{200===e.data.status&&(t.tableData=[...e.data.data],t.total=e.data.total,t.tableData.map((e=>{n.map((t=>{e[t]?e[t+"_text"]="已完成":e[t+"_text"]="未完成"}))})),t.loading=!1)})).catch((e=>{throw e}))}}}]);
//# sourceMappingURL=186.f3cef9e7.js.map