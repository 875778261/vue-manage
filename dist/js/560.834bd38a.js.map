{"version":3,"file":"js/560.834bd38a.js","mappings":"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","sources":["webpack://p_1/./src/components/students/WorkList.vue","webpack://p_1/src/components/students/WorkList.vue","webpack://p_1/./src/components/students/WorkList.vue?1923","webpack://p_1/./src/components/students/WorkList.vue?a446","webpack://p_1/./src/utils/table.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"work-list\"},[_c('h1',[_vm._v(\"work列表\")]),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":10,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"用户ID\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"userId\",\"label\":\"所属班级\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"作业名称\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"completed_text\",\"label\":\"完成情况\",\"align\":\"center\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"work-list\">\r\n        <h1>work列表</h1>\r\n        <!--  /* 1:1-10,2:11-20 slice((当前页数-1)*每页条数,当前页数*当前条数) */ -->\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\"\r\n            :page-sizes=\"pageSizes\" :page-size=\"10\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n        </el-pagination>\r\n\r\n\r\n        <!-- 表格 -->\r\n        <el-table :data=\"tableData\" v-loading=\"loading\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"id\" label=\"用户ID\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"userId\" label=\"所属班级\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"title\" label=\"作业名称\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"completed_text\" label=\"完成情况\" align=\"center\">\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getTableData } from '@/utils/table'\r\nexport default {\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            total: null,\r\n            currentPage: 1,\r\n            pageSizes: [10, 20, 30, 40],\r\n            pageSize: 10,\r\n            loading: true\r\n        }\r\n    },\r\n    created() {\r\n        /* getTableData('/works', this, {}, ['completed']) */\r\n        getTableData('/works', this, { page: 1, size: 10 }, ['completed'])\r\n    },\r\n    computed: {\r\n        getPageData() {\r\n            let getPageData;\r\n            getPageData = this.tableData.slice((this.currentPage - 1) * this.pageSize, this.currentPage * this.pageSize)\r\n\r\n            //如果tableData为空，数组的length为0，就无法使用，会报错想\r\n            /* this.tableData==null?getPageData=this.tableData:getPageData = this.tableData.slice((this.currentPage - 1) * this.pageSize, this.currentPage * this.pageSize) */\r\n\r\n            return getPageData\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        handleSizeChange(val) {\r\n            /* console.log(`每页 ${val} 条`);\r\n            this.pageSize = val\r\n            this.currentPage = 1\r\n            console.log(`当前页: ${this.currentPage}`); */\r\n\r\n            //后端分页\r\n\r\n            const loading = this.$loading({\r\n                lock: true,\r\n                text: 'Loading',\r\n                spinner: 'el-icon-loading',\r\n                background: 'rgba(0, 0, 0, 0.7)'\r\n            });\r\n\r\n\r\n            this.pageSize = val\r\n            this.currentPage = 1\r\n            getTableData('/works', this, { page: this.currentPage, size: val }, ['completed'])\r\n            console.log(`每页 ${val} 条`);\r\n            console.log(`当前页: ${this.currentPage}`);\r\n\r\n            loading.close();\r\n        },\r\n        handleCurrentChange(val) {\r\n            /* console.log(`当前页: ${val}`);\r\n            this.currentPage = val */\r\n\r\n            //后端分页\r\n            const loading = this.$loading({\r\n                lock: true,\r\n                text: 'Loading',\r\n                spinner: 'el-icon-loading',\r\n                background: 'rgba(0, 0, 0, 0.7)'\r\n            });\r\n            getTableData('/works', this, { page: val, size: this.pageSize }, ['completed'])\r\n            console.log(`当前页: ${val}`);\r\n            this.currentPage = val\r\n            loading.close();\r\n\r\n\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" >\r\n.work-list {\r\n    .el-pagination {\r\n        margin: 20px auto;\r\n        text-align: left;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkList.vue?vue&type=template&id=07e6bb6a&\"\nimport script from \"./WorkList.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkList.vue?vue&type=style&index=0&id=07e6bb6a&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\r\n\r\n// 获取表格数据\r\nexport function getData(url, currentrRoute, params) {\r\n    currentrRoute.service.get(url, { params: params || {} }).then((res) => {\r\n        if (res.data.status === 200) {\r\n            currentrRoute.tableData = [...res.data.data]\r\n            //console.log(currentrRoute.tableData);\r\n            currentrRoute.total = res.data.total\r\n            currentrRoute.tableData.forEach(item => {\r\n                item.sex === '1' ? item.sex_text = '男' : item.sex_text = '女'\r\n            })\r\n        }\r\n    }).catch(err => {\r\n        throw err\r\n    })\r\n}\r\n\r\n//新增、修改方法封装\r\nimport qs from 'qs'\r\nexport function changeInfo(method, url, currentrRoute, form, callback) {\r\n    let data = qs.stringify(form)\r\n    currentrRoute.service[method](url, data)\r\n        .then(res => {\r\n            if (res.data.status === 200) {\r\n                callback(url, currentrRoute)\r\n                currentrRoute.dialogFormVisible = false\r\n                currentrRoute.$refs['form'].resetFields()\r\n                currentrRoute.$message({ type: 'success', message: res.data.message })\r\n            }\r\n        }).catch(err => {\r\n            throw err\r\n        })\r\n}\r\n\r\n//删除方法的封装\r\nexport function delInfo(url, currentrRoute, row, callback) {\r\n\r\n    currentrRoute.$confirm(`确定要删除ID为 ${row.id} 的 ${row.name} 的信息吗`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        showCancelButton: true,\r\n        type: 'warning',\r\n    }).then(() => {\r\n        console.log(row.id);\r\n        console.log(url + '/' + row.id);\r\n        currentrRoute.service.delete(url + '/' + row.id)\r\n            .then(res => {\r\n                if (res.data.status === 200) {\r\n                    currentrRoute.$message({ message: res.data.message, type: 'success' })\r\n                    callback(url, currentrRoute)\r\n                }\r\n            })\r\n    }).catch((err) => {\r\n        currentrRoute.$message({ message: '取消删除', type: 'info' })\r\n        throw err\r\n    })\r\n}\r\n\r\n//作业列表获取表格数据\r\nexport function getTableData(url, currentrRoute, params,arr) {\r\n    currentrRoute.service.get(url, { params: params || {} }).then(res => {\r\n        if (res.data.status === 200) {\r\n            //console.log(res.data.data);\r\n            currentrRoute.tableData = [...res.data.data]\r\n            currentrRoute.total = res.data.total\r\n            //处理收到的数据\r\n            currentrRoute.tableData.map((item)=>{\r\n                arr.map(arrItem=>{\r\n                    item[arrItem]?item[arrItem+'_text']='已完成':item[arrItem+'_text']='未完成'\r\n                })\r\n            })\r\n            /* \r\n            currentrRoute.tableData.forEach((item)=>{\r\n                arr.forEach(arrItem=>{\r\n                    item[arrItem]?item[arrItem+'_text']='已完成':item[arrItem+'_text']='未完成'\r\n                })\r\n            })  \r\n            */\r\n            /* \r\n            currentrRoute.tableData.forEach(item=>{\r\n                if (item.completed) {\r\n                    item.completed_text='已完成'\r\n                }else{\r\n                    item.completed_text='未完成'\r\n                }\r\n            }) \r\n            */\r\n\r\n           currentrRoute.loading=false\r\n        }\r\n    }).catch(err => {\r\n        throw err\r\n    })\r\n}\r\n\r\n\r\n"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","currentPage","pageSizes","total","on","handleSizeChange","handleCurrentChange","directives","name","rawName","value","loading","expression","staticStyle","tableData","staticRenderFns","data","pageSize","created","getTableData","page","size","computed","getPageData","methods","lock","text","spinner","background","console","component","getData","url","currentrRoute","params","service","get","then","res","status","forEach","item","sex","sex_text","catch","err","changeInfo","method","form","callback","qs","dialogFormVisible","$refs","resetFields","$message","type","message","delInfo","row","$confirm","id","confirmButtonText","cancelButtonText","showCancelButton","log","delete","arr","map","arrItem"],"sourceRoot":""}